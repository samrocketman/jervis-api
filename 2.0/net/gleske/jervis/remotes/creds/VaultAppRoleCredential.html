<!--

     Licensed to the Apache Software Foundation (ASF) under one
     or more contributor license agreements.  See the NOTICE file
     distributed with this work for additional information
     regarding copyright ownership.  The ASF licenses this file
     to you under the Apache License, Version 2.0 (the
     "License"); you may not use this file except in compliance
     with the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

     Unless required by applicable law or agreed to in writing,
     software distributed under the License is distributed on an
     "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
     KIND, either express or implied.  See the License for the
     specific language governing permissions and limitations
     under the License.

-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- **************************************************************** -->
<!-- *  PLEASE KEEP COMPLICATED EXPRESSIONS OUT OF THESE TEMPLATES, * -->
<!-- *  i.e. only iterate & print data where possible. Thanks, Jez. * -->
<!-- **************************************************************** -->

<html>
<head>
    <!-- Generated by groovydoc -->
    <title>VaultAppRoleCredential (Jervis 2.0 API)</title>
    
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link href="../../../../../groovy.ico" type="image/x-icon" rel="shortcut icon">
    <link href="../../../../../groovy.ico" type="image/x-icon" rel="icon">
    <link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
    <link rel="stylesheet" href="../../../../../styles/base16/harmonic16-dark.min.css">
    <script src="../../../../../highlight.min.js"></script>
    <script>hljs.highlightAll();</script>

<body class="center">
<script type="text/javascript"><!--
if (location.href.indexOf('is-external=true') == -1) {
    parent.document.title="VaultAppRoleCredential (Jervis 2.0 API)";
}
//-->
</script>
<noscript>
    <div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
    <!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
    <!--   -->
</a>
    <ul class="navList" title="Navigation">
        <li><a href="../../../../../overview-summary.html">Overview</a></li>
        <li><a href="package-summary.html">Package</a></li>
        <li class="navBarCell1Rev">Class</li>
        <li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
        <li><a href="../../../../../index-all.html">Index</a></li>
        <li><a href="../../../../../help-doc.html">Help</a></li>
    </ul>
</div>

<div class="subNav">
    <div>
        <ul class="navList">
            <li><a href="../../../../../index.html?net/gleske/jervis/remotes/creds/VaultAppRoleCredential" target="_top">Frames</a></li>
            <li><a href="VaultAppRoleCredential.html" target="_top">No Frames</a></li>
        </ul>
    </div>
    <div>
        <ul class="subNavList">
            <li>Summary:&nbsp;</li>
            Nested&nbsp;&nbsp;&nbsp;Field&nbsp;&nbsp;&nbsp;<li><a href="#property_summary">Property</a></li>&nbsp;&nbsp;&nbsp;<li><a href="#constructor_summary">Constructor</a></li>&nbsp;&nbsp;&nbsp;<li><a href="#method_summary">Method</a></li>&nbsp;&nbsp;&nbsp;
        </ul>
        <ul class="subNavList">
            <li>&nbsp;|&nbsp;Detail:&nbsp;</li>
            Field&nbsp;&nbsp;&nbsp;<li><a href="#prop_detail">Property</a></li>&nbsp;&nbsp;&nbsp;<li><a href="#constructor_detail">Constructor</a></li>&nbsp;&nbsp;&nbsp;<li><a href="#method_detail">Method</a></li>&nbsp;&nbsp;&nbsp;
        </ul>
    </div>
    <a name="skip-navbar_top">
        <!--   -->
    </a></div>
<!-- ========= END OF TOP NAVBAR ========= -->

<!-- ======== START OF CLASS DATA ======== -->
<div class="header">

    <div class="subTitle">Package: <strong>net.gleske.jervis.remotes.creds</strong></div>

    <h2 title="[Groovy] Class VaultAppRoleCredential" class="title">[Groovy] Class VaultAppRoleCredential</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><ul class="inheritance"></ul></li><li>net.gleske.jervis.remotes.creds.VaultAppRoleCredential
</ul>
<div class="description">
    <ul class="blockList">
        <li class="blockList">

            <dl>
                <dt>All Implemented Interfaces and Traits:</dt>
                <dd><a href='../../../../../net/gleske/jervis/remotes/creds/ReadonlyTokenCredential.html'>ReadonlyTokenCredential</a>, <a href='../../../../../net/gleske/jervis/remotes/SimpleRestServiceSupport.html'>SimpleRestServiceSupport</a>, <a href='../../../../../net/gleske/jervis/remotes/interfaces/VaultCredential.html'>VaultCredential</a></dd>
            </dl>
            <!-- todo: direct known subclasses -->
            <hr>
            <br>
<pre>class VaultAppRoleCredential
extends <a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html' title='Object'>Object</a>

</pre>



    <p>
  This provides
  <a href="https://developer.hashicorp.com/vault/docs/auth/approle" target=_blank>HashiCorp Vault AppRole Authentication</a>
  which issues rotating ephemeral tokens automatically.  HashiCorp recommends
  using AppRole authentication for applications and services.  The high level
  operation of this class is the following.

  <ul>
  <li>
    Provide seamless Vault API authentication for
    <tt><a href='../../../../../net/gleske/jervis/remotes/VaultService.html' title='VaultService'>VaultService</a></tt>.
  </li>
  <li>
    Use Role ID and Secret ID to issue, renew, rotate, and revoke Vault tokens
    automatically.  See examples in
    <tt><a href='../../../../../net/gleske/jervis/remotes/interfaces/VaultRoleIdCredential.html' title='VaultRoleIdCredential'>VaultRoleIdCredential</a></tt> and
    <tt><a href='../../../../../net/gleske/jervis/remotes/creds/VaultRoleIdCredentialImpl.html' title='VaultRoleIdCredentialImpl'>VaultRoleIdCredentialImpl</a></tt>.
  </li>
  <li>
    Automatically injects issued Vault tokens as authentication headers.
  </li>
  <li>
    Tracks token expiration and automatically renews or rotates tokens
    transparent to <tt>VaultService</tt>.
  </li>
  <li>
    Can revoke issued tokens.
  </li>
  </ul>

  <h2>Vault Policy</h2>

  <p>If you decide to use renable tokens and allow all features provided by this
  class, then you'll need the following Vault policy.</p>

<pre><code>
# Allow tokens to look up their own properties
path "auth/token/lookup-self" {
    capabilities = ["read"]
}

# Allow tokens to renew themselves
path "auth/token/renew-self" {
    capabilities = ["update"]
}

# Allow tokens to revoke themselves
path "auth/token/revoke-self" {
    capabilities = ["update"]
}
</code></pre>

  <p>Bear in mind the above policy is just for this class for its credential
  management.  You'll want other policy rules for accessing secrets.</p>

  <h2>Recommended Vault Policy</h2>

  <p>In general, you'll want to use the most limited Vault Policy you can for
  your application.  For example, in this section you only need a two rule
  policy.</p>

<pre><code>
# Allow tokens to revoke themselves
path "auth/token/revoke-self" {
    capabilities = ["update"]
}

# Read only KV v2 Permissions
path "kv/*" {
    capabilities = ["read"]
}
</code></pre>

  <p>You can use the <tt><a href='../../../../../net/gleske/jervis/remotes/VaultService.html' title='VaultService'>VaultService</a></tt> API
  client to apply this policy.  Alternately, you can do this in the Vault
  UI.</p>

<pre><code>
import net.gleske.jervis.remotes.interfaces.TokenCredential
import net.gleske.jervis.remotes.VaultService

Map data = [policy: '''\
# Allow tokens to revoke themselves
path "auth/token/revoke-self" {
    capabilities = ["update"]
}

# Read only KV v2 Permissions
path "kv/*" {
    capabilities = ["read"]
}
''']

// Create an API client using an admin human user vault token
TokenCredential creds = [getToken: {-> 'your admin token' }] as TokenCredential
VaultService myvault = new VaultService('https://vault.example.com/', creds)

// Upload policy
myvault.apiFetch('sys/policy/jenkins-limited', [:], 'POST', data)
</code></pre>

  <h2>Initializing AppRole</h2>

  <p>This section discusses how to enable AppRole authentication in Vault as
  well as generate an application secret for a service such as Jenkins.</p>

  <h5>Enable AppRole authentication engine</h5>

  <p>You can enable AppRole via the Vault UI and set it up via Vault CLI.  This
  example illustrates how to do the same thing with the
  <tt><a href='../../../../../net/gleske/jervis/remotes/VaultService.html' title='VaultService'>VaultService</a></tt> API client.  The
  example includes recommended service role settings with a short TTL (1 minute)
  and non-renewable tokens.  This class will automatically manage obtaining new
  tokens if a token it uses expires.</p>

<pre><code>
import net.gleske.jervis.remotes.interfaces.TokenCredential
import net.gleske.jervis.remotes.VaultService
import net.gleske.jervis.tools.YamlOperator

// Create an API client using an admin human user vault token
TokenCredential creds = [getToken: {-> 'your admin token' }] as TokenCredential
VaultService myvault = new VaultService('https://vault.example.com/', creds)

// Recommended AppRole settings
Map approle_settings = [
    token_ttl: "1m",
    token_explicit_max_ttl: "1m",
    token_policies: ["jenkins-limited"],
    token_no_default_policy: true,
    token_type: "service"
]

// Enable AppRole Authentication Engine
myvault.apiFetch('sys/auth/approle', [:], 'POST', [type: 'approle'])

// Create an application Role 'jenkins'
myvault.apiFetch('auth/approle/role/jenkins', [:], 'POST', approle_settings)

// Generate an AppRole Role ID and Secret ID for the 'jenkins' Role
Map role_data = [:]
role_data.role_id = myvault.apiFetch('auth/approle/role/jenkins/role-id').data.role_id
role_data.secret_id = myvault.apiFetch('auth/approle/role/jenkins/secret-id', [:], 'POST')?.data?.secret_id
println(YamlOperator.writeObjToYaml(role_data))
</code></pre>

    <p>Take the <tt>role_id</tt> and <tt>secret_id</tt>, and use it to
    instantiate examples for this class.</p>

  <h2>Sample usage</h2>
  <p>To run this example, clone Jervis and execute <tt>./gradlew console</tt>
  to bring up a <a href="http://groovy-lang.org/groovyconsole.html" target="_blank">Groovy Console</a>
  with the classpath set up.</p>

  <p>The following offers basic usage.  However, there are better and more
  secure examples in
  <tt><a href='../../../../../net/gleske/jervis/remotes/interfaces/VaultRoleIdCredential.html' title='VaultRoleIdCredential'>VaultRoleIdCredential</a></tt>.</p>

<pre><code>
import net.gleske.jervis.remotes.creds.VaultAppRoleCredential
import net.gleske.jervis.remotes.VaultService

VaultAppRoleCredential approle = new VaultAppRoleCredential('https://vault.example.com', 'app role id', 'app secret id')

// Instantiate vault API client with approle
VaultService vault = new VaultService(approle)

// Set mount kv/ to be KV v2 secrets engine
vault.mountVersions = [kv: 2]

// Ready to perform secrets operations
vault.getSecret('kv/path/to/secret')

// When your application is done using Vault it can proceed to revoke its active
// token.
approle.revokeToken()
</code></pre>
  </p>

          </li>
    </ul>
</div>

<div class="summary">
    <ul class="blockList">
        <li class="blockList">
        <!-- =========== NESTED CLASS SUMMARY =========== -->
        

        <!-- =========== ENUM CONSTANT SUMMARY =========== -->
        
        <!-- =========== FIELD SUMMARY =========== -->
        

        <!-- =========== PROPERTY SUMMARY =========== -->
        
         <ul class="blockList">
                <li class="blockList"><a name="property_summary"><!--   --></a>
                    <h3>Properties Summary</h3>
                    <ul class="blockList">
                    <table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Properties Summary table, listing nested classes, and an explanation">
                        <caption><span>Properties</span><span class="tabEnd">&nbsp;</span></caption>
                        <tr>
                            <th class="colFirst" scope="col">Type</th>
                            <th class="colLast" scope="col">Name and description</th>
                        </tr>
                        
                        <tr class="altColor">
                            <td class="colFirst"><code><strong><a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html' title='String'>String</a></strong></code>&nbsp;</td>
                            <td class="colLast"><code><a href="#approle_mount">approle_mount</a></code><br>The name of the mount for the AppRole authentication backend.  </td>
                        </tr>
                        
                        <tr class="rowColor">
                            <td class="colFirst"><code><strong><a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html' title='Map'>Map</a>&lt;<a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html' title='String'>String</a>, <a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html' title='String'>String</a>&gt;</strong></code>&nbsp;</td>
                            <td class="colLast"><code><a href="#headers">headers</a></code><br>Customizable HTTP headers which get sent to Vault in addition to
      authentication headers.</td>
                        </tr>
                        
                        <tr class="altColor">
                            <td class="colFirst"><code><strong><a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Long.html' title='Long'>Long</a></strong></code>&nbsp;</td>
                            <td class="colLast"><code><a href="#renew_buffer">renew_buffer</a></code><br>The time buffer before a renewal is forced.  </td>
                        </tr>
                        
                    </table>
                   </ul>
                </li>
            </ul>
        

        <!-- =========== ELEMENT SUMMARY =========== -->
        

        
        <!-- ======== CONSTRUCTOR SUMMARY ======== -->
        <ul class="blockList">
                <li class="blockList"><a name="constructor_summary"><!--   --></a>
                    <h3>Constructor Summary</h3>
                    <ul class="blockList">
                    <table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructors Summary table">
                        <caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
                        <tr>
                            <th class="colFirst" scope="col">Constructor and description</th>
                        </tr>
                        
                        <tr class="altColor">
                            <td class="colFirst">
                                <code><a href="#VaultAppRoleCredential(java.lang.String, java.lang.String, java.lang.String)">VaultAppRoleCredential</a>
                                (<a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html' title='String'>String</a> vault_url, <a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html' title='String'>String</a> role_id, <a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html' title='String'>String</a> secret_id)</code><br>A simple way to establish an authenticated session with Vault.  </td>
                        </tr>
                        
                        <tr class="rowColor">
                            <td class="colFirst">
                                <code><a href="#VaultAppRoleCredential(java.lang.String, net.gleske.jervis.remotes.interfaces.VaultRoleIdCredential)">VaultAppRoleCredential</a>
                                (<a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html' title='String'>String</a> vault_url, <a href='../../../../../net/gleske/jervis/remotes/interfaces/VaultRoleIdCredential.html'>VaultRoleIdCredential</a> credential)</code><br>The recommended way to establish a secured authenticated session with
      Vault.  </td>
                        </tr>
                        
                    </table>
                   </ul>
              </li>
        </ul>
        

        
        <!-- ========== METHOD SUMMARY =========== -->
        <ul class="blockList">
            
            <li class="blockList"><a name="method_summary"><!--   --></a>
                    <h3>Methods Summary</h3>
                    <ul class="blockList">
                    <table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Methods Summary table">
                        <caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
                        <tr>
                            <th class="colFirst" scope="col">Type Params</th>
                            <th class="colLast" scope="col">Return Type</th>
                            <th class="colLast" scope="col">Name and description</th>
                        </tr>
                        
                        <tr class="altColor">
                            <td class="colFirst"><code></code></td>
                            <td class="colLast"><code><a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html' title='String'>String</a></code></td>
                            <td class="colLast"><code><strong><a href="#baseUrl()">baseUrl</a></strong>()</code><br>Returns the Vault URL.  </td>
                        </tr>
                        
                        <tr class="rowColor">
                            <td class="colFirst"><code></code></td>
                            <td class="colLast"><code><a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Long.html' title='Long'>Long</a></code></td>
                            <td class="colLast"><code><strong><a href="#getRenew_buffer()">getRenew_buffer</a></strong>()</code><br>Returns renew buffer.  </td>
                        </tr>
                        
                        <tr class="altColor">
                            <td class="colFirst"><code></code></td>
                            <td class="colLast"><code><a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html' title='String'>String</a></code></td>
                            <td class="colLast"><code><strong><a href="#getToken()">getToken</a></strong>()</code><br>This will lease a new token via AppRole and return the leased token.  </td>
                        </tr>
                        
                        <tr class="rowColor">
                            <td class="colFirst"><code></code></td>
                            <td class="colLast"><code><a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html' title='String'>String</a></code></td>
                            <td class="colLast"><code><strong><a href="#getVault_url()">getVault_url</a></strong>()</code><br>Returns the Vault URL.  </td>
                        </tr>
                        
                        <tr class="altColor">
                            <td class="colFirst"><code></code></td>
                            <td class="colLast"><code><a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html' title='Map'>Map</a></code></td>
                            <td class="colLast"><code><strong><a href="#header(java.util.Map)">header</a></strong>(<a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html' title='Map'>Map</a> headers = [:])</code><br>Returns authentication headers used for API requests to Vault.</td>
                        </tr>
                        
                        <tr class="rowColor">
                            <td class="colFirst"><code></code></td>
                            <td class="colLast"><code><a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html' title='Map'>Map</a></code></td>
                            <td class="colLast"><code><strong><a href="#lookupToken()">lookupToken</a></strong>()</code><br>Performs a lookup of the currently leased token and returns the response
      from Vault.</td>
                        </tr>
                        
                        <tr class="altColor">
                            <td class="colFirst"><code></code></td>
                            <td class="colLast"><code><a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Boolean.html' title='Boolean'>Boolean</a></code></td>
                            <td class="colLast"><code><strong><a href="#renewToken()">renewToken</a></strong>()</code><br>Force a token renewal.  </td>
                        </tr>
                        
                        <tr class="rowColor">
                            <td class="colFirst"><code></code></td>
                            <td class="colLast"><code>void</code></td>
                            <td class="colLast"><code><strong><a href="#revokeToken()">revokeToken</a></strong>()</code><br>Revokes the current token in use by this auth client.  </td>
                        </tr>
                        
                        <tr class="altColor">
                            <td class="colFirst"><code></code></td>
                            <td class="colLast"><code>void</code></td>
                            <td class="colLast"><code><strong><a href="#setApprole_mount(java.lang.String)">setApprole_mount</a></strong>(<a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html' title='String'>String</a> mount)</code><br>Sets the approle_mount property and trims leading or trailing slash.</td>
                        </tr>
                        
                    </table>
                   </ul>
              </li>
            
            <li class="blockList"><a name="method_summary"><!--   --></a>
                    <h3>Inherited Methods Summary</h3>
                    <ul class="blockList">
                    <table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Inherited Methods Summary table">
                        <caption><span>Inherited Methods</span><span class="tabEnd">&nbsp;</span></caption>
                        <tr>
                            <th class="colFirst" scope="col">Methods inherited from class</th>
                            <th class="colLast" scope="col">Name</th>
                        </tr>
                        
                        <tr class="altColor">
                            <td class="colFirst"><code>class <a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html' title='Object'>Object</a></code></td>
                            <td class="colLast"><code><a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#wait(long)' title='wait'>wait</a>, <a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#wait(long, int)' title='wait'>wait</a>, <a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#wait()' title='wait'>wait</a>, <a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)' title='equals'>equals</a>, <a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#toString()' title='toString'>toString</a>, <a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#hashCode()' title='hashCode'>hashCode</a>, <a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#getClass()' title='getClass'>getClass</a>, <a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#notify()' title='notify'>notify</a>, <a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#notifyAll()' title='notifyAll'>notifyAll</a></code></td>
                        </tr>
                    </table>
                   </ul>
              </li>
                
        </ul>
        
    </li>
    </ul>
</div>

<div class="details">
    <ul class="blockList">
        <li class="blockList">
           

            

            
            <!-- =========== PROPERTY DETAIL =========== -->
            <ul class="blockList">
                <li class="blockList"><a name="prop_detail">
                    <!--   -->
                </a>
                    <h3>Property Detail</h3>
                    
                        <a name="approle_mount"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4><a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html' title='String'>String</a> <strong>approle_mount</strong></h4>
                                <p>
      The name of the mount for the AppRole authentication backend.  By default,
      this is <tt>approle</tt>.
      </p>
                            </li>
                        </ul>
                    
                        <a name="headers"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4><a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html' title='Map'>Map</a>&lt;<a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html' title='String'>String</a>, <a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html' title='String'>String</a>&gt; <strong>headers</strong></h4>
                                <p>
      Customizable HTTP headers which get sent to Vault in addition to
      authentication headers.
      </p>
                            </li>
                        </ul>
                    
                        <a name="renew_buffer"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4><a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Long.html' title='Long'>Long</a> <strong>renew_buffer</strong></h4>
                                <p>
      The time buffer before a renewal is forced.  This is to account for clock
      drift and is customizable by the client.  By default the value is
      <tt>5</tt> seconds.  All time-based calculations around token renewal
      assume this is set correctly by the caller.  If it is incorrectly set then
      <tt>renew_buffer</tt> is <tt>0</tt> seconds.
      </p>
                            </li>
                        </ul>
                    
                </li>
            </ul>
            

            

            
            <!-- =========== CONSTRUCTOR DETAIL =========== -->
            <ul class="blockList">
                <li class="blockList"><a name="constructor_detail">
                    <!--   -->
                </a>
                    <h3>Constructor Detail</h3>
                    
                        <a name="VaultAppRoleCredential(java.lang.String, java.lang.String, java.lang.String)"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4><strong>VaultAppRoleCredential</strong>(<a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html' title='String'>String</a> vault_url, <a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html' title='String'>String</a> role_id, <a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html' title='String'>String</a> secret_id)</h4>
                                <p>
      A simple way to establish an authenticated session with Vault.  In
      general, this is less secure.  Favor using
      <tt><a href='#VaultAppRoleCredential(java.lang.String, net.gleske.jervis.remotes.interfaces.VaultRoleIdCredential)'>VaultAppRoleCredential(java.lang.String, net.gleske.jervis.remotes.interfaces.VaultRoleIdCredential)</a></tt>,
      instead.
      </p>
                            </li>
                        </ul>
                    
                        <a name="VaultAppRoleCredential(java.lang.String, net.gleske.jervis.remotes.interfaces.VaultRoleIdCredential)"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4><strong>VaultAppRoleCredential</strong>(<a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html' title='String'>String</a> vault_url, <a href='../../../../../net/gleske/jervis/remotes/interfaces/VaultRoleIdCredential.html'>VaultRoleIdCredential</a> credential)</h4>
                                <p>
      The recommended way to establish a secured authenticated session with
      Vault.  Refer to the API documentation of <tt>VaultRoleIdCredential</tt>
      for detailed examples on how this credential should be instantiated.
      </p>
                            </li>
                        </ul>
                    
                </li>
            </ul>
            


            
            <!-- =========== METHOD DETAIL =========== -->
            <ul class="blockList">
                <li class="blockList"><a name="method_detail">
                    <!--   -->
                </a>
                    <h3>Method Detail</h3>
                    
                        <a name="baseUrl()"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4><a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html' title='String'>String</a> <strong>baseUrl</strong>()</h4>
                                <p>
      Returns the Vault URL.  This method is used internally by this class
      establish Vault connectivity.
      <DL><DT><B>Returns:</B></DT><DD>Returns the Vault API URL.</DD></DL></p>
                            </li>
                        </ul>
                    
                        <a name="getRenew_buffer()"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4><a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Long.html' title='Long'>Long</a> <strong>getRenew_buffer</strong>()</h4>
                                <p>
      Returns renew buffer.  Does not allow renew buffer to be undefined or go below zero.
      <DL><DT><B>Returns:</B></DT><DD><tt>0</tt> or a <tt>renew_buffer</tt> greater than <tt>0</tt>.</DD></DL></p>
                            </li>
                        </ul>
                    
                        <a name="getToken()"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4><a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html' title='String'>String</a> <strong>getToken</strong>()</h4>
                                <p>
      This will lease a new token via AppRole and return the leased token.  If
      the token is use is due for renewal it will automatically be renewed. If
      the token is expired or needs renewal but is non-renewable, then a new
      token lease will automatically be created.
      <DL><DT><B>Returns:</B></DT><DD>Always returns a valid token with at least a 5 second lease.  If
      you require the minimum lease to be longer, then adjust
      <tt><a href='#renew_buffer'>renew_buffer</a></tt>.</DD></DL></p>
                            </li>
                        </ul>
                    
                        <a name="getVault_url()"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4><a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html' title='String'>String</a> <strong>getVault_url</strong>()</h4>
                                <p>
      Returns the Vault URL.  This method is used internally by the
      <tt><a href='../../../../../net/gleske/jervis/remotes/VaultService.html' title='VaultService'>VaultService</a></tt> class to establish
      Vault connectivity.
      <DL><DT><B>Returns:</B></DT><DD>Returns the Vault API URL.</DD></DL></p>
                            </li>
                        </ul>
                    
                        <a name="header(java.util.Map)"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4><a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html' title='Map'>Map</a> <strong>header</strong>(<a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html' title='Map'>Map</a> headers = [:])</h4>
                                <p>
      Returns authentication headers used for API requests to Vault.
      <DL><DT><B>Returns:</B></DT><DD>Returns a <tt>Map</tt> of HTTP headers.</DD></DL></p>
                            </li>
                        </ul>
                    
                        <a name="lookupToken()"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4><a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html' title='Map'>Map</a> <strong>lookupToken</strong>()</h4>
                                <p>
      Performs a lookup of the currently leased token and returns the response
      from Vault.
      <DL><DT><B>Returns:</B></DT><DD>Returns the JSON response from Vault parsed as a <tt>Map</tt>.</DD></DL></p>
                            </li>
                        </ul>
                    
                        <a name="renewToken()"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4><a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Boolean.html' title='Boolean'>Boolean</a> <strong>renewToken</strong>()</h4>
                                <p>
      Force a token renewal.  It is unlikely this method will ever need to be
      called because <tt><a href='#getToken()'>getToken()</a></tt> will manage token renewal.
      <DL><DT><B>Returns:</B></DT><DD>Returns <tt>true</tt> if the token renewal was successful.
              Otherwise, returns <tt>false</tt>.</DD></DL></p>
                            </li>
                        </ul>
                    
                        <a name="revokeToken()"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>void <strong>revokeToken</strong>()</h4>
                                <p>
      Revokes the current token in use by this auth client.  Please note, if
      more API communication occurs this auth client will automatically lease a
      new token.
      </p>
                            </li>
                        </ul>
                    
                        <a name="setApprole_mount(java.lang.String)"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>void <strong>setApprole_mount</strong>(<a href='https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html' title='String'>String</a> mount)</h4>
                                <p>
      Sets the approle_mount property and trims leading or trailing slash.
      <DL><DT><B>Parameters:</B></DT><DD><code>mount</code> -  The name of the mount for the AppRole authentication backend.</DD></DL></p>
                            </li>
                        </ul>
                    
                </li>
            </ul>
            
        </li>
    </ul>
</div>

<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
    <!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
    <!--   -->
</a>
    <ul class="navList" title="Navigation">
        <li><a href="../../../../../overview-summary.html">Overview</a></li>
        <li><a href="package-summary.html">Package</a></li>
        <li class="navBarCell1Rev">Class</li>
        <li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
        <li><a href="../../../../../index-all.html">Index</a></li>
        <li><a href="../../../../../help-doc.html">Help</a></li>
    </ul>
</div>

<div class="subNav">
    <div>
        <ul class="navList">
            <li><a href="../../../../../index.html?net/gleske/jervis/remotes/creds/VaultAppRoleCredential" target="_top">Frames</a></li>
            <li><a href="VaultAppRoleCredential.html" target="_top">No Frames</a></li>
        </ul>
    </div>
    <div>
        <ul class="subNavList">
            <li>Summary:&nbsp;</li>
            Nested&nbsp;&nbsp;&nbsp;Field&nbsp;&nbsp;&nbsp;<li><a href="#property_summary">Property</a></li>&nbsp;&nbsp;&nbsp;<li><a href="#constructor_summary">Constructor</a></li>&nbsp;&nbsp;&nbsp;<li><a href="#method_summary">Method</a></li>&nbsp;&nbsp;&nbsp;
        </ul>
        <ul class="subNavList">
            <li>&nbsp;|&nbsp;Detail:&nbsp;</li>
            Field&nbsp;&nbsp;&nbsp;<li><a href="#prop_detail">Property</a></li>&nbsp;&nbsp;&nbsp;<li><a href="#constructor_detail">Constructor</a></li>&nbsp;&nbsp;&nbsp;<li><a href="#method_detail">Method</a></li>&nbsp;&nbsp;&nbsp;
        </ul>
    </div>
    <p><a href="https://github.com/samrocketman/jervis" target="_blank">Jervis</a> API documentation.</p>
    <a name="skip-navbar_bottom">
        <!--   -->
    </a>
    </div>
</div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
